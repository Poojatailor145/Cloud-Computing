<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <title>Order Confirmation</title>
    <style>
      /* Custom styles for the order confirmation page */
      .confirmation-container {
        text-align: center;
        padding: 50px 20px;
      }

      .confirmation-header {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #28a745; /* Green color for confirmation */
      }

      .confirmation-message {
        font-size: 1.2rem;
        margin-bottom: 30px;
        color: #444;
      }

      .order-id {
        font-weight: bold;
        font-size: 1.5rem;
        color: #17a2b8; /* Blue color for order ID */
      }

      .order-details {
        margin-top: 30px;
        background-color: #f8f9fa;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        display: inline-block;
      }

      .order-details h4 {
        margin-bottom: 10px;
        color: #6c757d;
      }

      .order-details p {
        font-size: 1.1rem;
        color: #343a40;
      }

      .btn-back {
        display: inline-block;
        margin-top: 30px;
        padding: 12px 25px;
        background-color: #007bff;
        color: #fff;
        border-radius: 5px;
        text-decoration: none;
        font-size: 1rem;
        transition: background-color 0.3s;
      }

      .btn-back:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <nav class="nav container">
        <a href="index.html" class="nav__logo"><img src="images/logo.png" alt="" class="nav__logo-img" /></a>
        <div class="nav__menu" id="nav-menu">
          <ul class="nav__list">
            <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
            <li class="nav__item"><a href="shop.html" class="nav__link">Shop</a></li>
            <li class="nav__item"><a href="accounts.html" class="nav__link">My Account</a></li>
          </ul>
        </div>
        <div class="header__user-actions">
          <a href="cart.html" class="header__action-btn">
            <img src="images/icon-cart.svg" alt="" />
            <span class="count" id="cart-count">0</span>
          </a>
        </div>
      </nav>
    </header>

    <main class="main">
      <!-- Order Confirmation Section -->
      <section class="confirmation-container">
        <h2 class="confirmation-header">Thank You for Your Order!</h2>
        <p class="confirmation-message">
          Your order has been successfully placed. We are currently processing it and will send you an email with the details.
        </p>

        <div class="order-id">
          Order ID: <span id="order-id">#123456</span>
        </div>

        <!-- Order Details Section -->
        <div class="order-details">
          <h4>Order Details:</h4>
          <p id="order-items">Items in your order: 3</p>
          <p id="order-total">Total Amount: €200</p>
          <p>Estimated Delivery Date: 2-3 Business Days</p>
        </div><br><br>

        <a href="shop.html" class="btn">Continue Shopping</a>
      </section>
    </main>

    <footer class="footer container">
        <div class="footer__container grid">
            <div class="footer__content">
                <a href="index.html" class="footer__logo">
                    <img src="images/logo.png" alt="" class="footer__logo-img">
                </a>

                <h4 class="footer__subtitle">Contact</h4>
                <p class="footer__description">
                    <span>Address:</span> 562 Konrad Duden Weg, Frankfurt, Germany
                </p>

                <p class="footer__description">
                    <span>Phone:</span> 01588745454
                </p>

                <p class="footer__description">
                    <span>Working Hours:</span> 10:00 - 18:00, Mon-Sat
                </p>

                <div class="footer__social">
                    <div class="footer__subtitle">Follow Me</div>
                    <div class="footer_-social-links flex">
                        <a href="">
                            <img src="images/icon-facebook.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="">
                            <img src="images/icon-instagram.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="">
                            <img src="images/icon-twitter.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="">
                            <img src="images/icon-pinterest.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="">
                            <img src="images/icon-youtube.svg" alt="" class="footer__social-icon">
                        </a>
                    </div>

                </div>

            </div>

            <div class="footer__content">
                <h3 class="footer__title">Address</h3>
                <ul class="footer__links">
                    <li><a href="" class="footer__link">About Us</a></li>
                    <li><a href="" class="footer__link">Delivery Information</a></li>
                    <li><a href="" class="footer__link">Privacy Policy</a></li>
                    <li><a href="" class="footer__link">Terms & Conditions</a></li>
                    <li><a href="" class="footer__link">Contact Us</a></li>
                    <li><a href="" class="footer__link">Support Center</a></li>
                </ul>
            </div>

            <div class="footer__content">
                <h3 class="footer__title">My Account</h3>
                <ul class="footer__links">
                    <li><a href="" class="footer__link">Sign In</a></li>
                    <li><a href="" class="footer__link">View cart</a></li>
                    <li><a href="" class="footer__link">Register</a></li>
                    <li><a href="" class="footer__link">Track My Order</a></li>
                    <li><a href="" class="footer__link">Help</a></li>
                    <li><a href="" class="footer__link">Order</a></li>
                </ul>
            </div>

            <div class="footer__content">
                <h3 class="footer__title">Secured Payment Gateways</h3>
                <img src="images/payment-method.png" alt="" class="payment__img">
            </div>
        </div>

        <div class="footer__bottom">
            <p class="copyright">&copy; 2025 Coziture. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="js/main.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const orderIdElement = document.getElementById("order-id");
        const orderItemsElement = document.getElementById("order-items");
        const orderTotalElement = document.getElementById("order-total");

        // Fetch the order details for the user from the API
        fetch(`http://localhost:5000/api/orders/user/1`)
          .then((response) => response.json())
          .then((orders) => {
            // Sort orders by orderDate to get the latest order
            const latestOrder = orders
              .sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate))[0];

            // Update the page with the latest order details
            orderIdElement.textContent = `#${latestOrder.orderId}`;
            const orderItems = latestOrder.orderItems.map(item => `${item.product.productName} x ${item.quantity}`).join(", ");
            orderItemsElement.textContent = `Items in your order: ${orderItems}`;
            orderTotalElement.textContent = `Total Amount: €${latestOrder.totalAmount.toFixed(2)}`;
          })
          .catch((error) => {
            console.error("Error fetching order details:", error);
            alert("Error fetching order details");
          });
      });
    </script>
  </body>
</html>
