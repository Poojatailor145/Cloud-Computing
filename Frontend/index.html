<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--=============== FLATICON ===============-->
    <link
        rel="stylesheet"
        href="https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css"
    />

    <!--=============== SWIPER CSS ===============-->
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <!--=============== CSS ===============-->
    <link rel="stylesheet" href="css/styles.css" />

    <title>Coziture</title>
  </head>
  <body>
    <!--=============== HEADER ===============-->
    <header class="header">
        <nav class="nav container">
            <a href="index.html" class="nav__logo">
                <img src="images/logo.png" alt="" class="nav__logo-img">
            </a>

            <div class="nav__menu" id="nav-menu">

                <div class="nav__menu-top">
                    <a href="index.html" class="nav__menu-logo">
                        <img src="images/logo.png" alt="">
                    </a>

                    <div class="nav__close" id="nav-close">
                        <i class="fi fi-rs-cross-small"></i>
                    </div>
                </div>
                
                <ul class="nav__list">
                    <li class="nav__item">
                        <a href="index.html" class="nav__link active-link">Home</a>
                    </li>

                    <li class="nav__item">
                        <a href="shop.html" class="nav__link">Shop</a>
                    </li>

                    <li class="nav__item">
                        <a href="accounts.html" class="nav__link">My Account</a>
                    </li>
                </ul>
            </div>

            <div class="header__user-actions">
                <a href="cart.html" class="header__action-btn">
                    <img src="images/icon-cart.svg" alt="">
                    <span class="count" id="cart-count">3</span>
                </a>

                <div class="header__action-btn nav__toggle" id="nav-toggle">
                    <img src="images/menu-burger.svg" alt="">
                </div>
            </div>
        </nav>
    </header>

    <!--=============== MAIN ===============-->
    <main class="main">
      <!--=============== HOME ===============-->
      <section class="home section--lg">
        <div class="home__container container grid">
            <div class="home__content">
                <span class="home__subtitle">Hot Promotions</span>
                <h1 class="home__title">Fashion Trending <span>Great Collection</span></h1>
                <p class="home__description">Save more with coupons and upto 20% off</p><br>
                <a href="shop.html" class="btn">Shop Now</a>
            </div>

            <img src="images/home-img.png" alt="" class="home__img">
        </div>
      </section>

      <!--=============== CATEGORIES ===============-->
      <section class="categories container section">
        <h3 class="section__title"><span>Popular</span> Categories</h3>

        <div class="categories__container swiper" >
            <div class="swiper-wrapper" id="category-list">
               <!-- Categories will be dynamically injected here -->
            </div>

            <div class="swiper-button-next">
                <i class="fi fi-rs-angle-right"></i>
            </div>
            <div class="swiper-button-prev">
                <i class="fi fi-rs-angle-left"></i>
            </div>

        </div>
      </section>

      <!--=============== PRODUCTS ===============-->
      <section class="products section container">
        <div class="tab__btns">
            <span class="tab__btn active-tab">Bestselling Products</span>
        </div>

        <div class="tab__items">
            <div class="tab__item active-tab">
                <div class="products__container grid" id="product-list">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>
        </div>
      </section>

      <!--=============== DEALS ===============-->
      <section class="deals section">
         <div class="deals__container container grid">
            <div class="deals__item">
                <div class="deals__group">
                    <h3 class="deals__brand">Deal of the day</h3>
                    <span class="deals__category">Limited quantities.</span>
                </div>

                <h4 class="deals__title">Summer Collection New Modern Design</h4>
                <div class="deals__price flex">
                    <span class="new__price">€230</span>
                    <span class="old__price">€250</span>
                </div>

                <div class="deals__group">
                    <p class="deals__countdown-text">Hurry Up! Offer End In:</p>

                    <div class="countdown">
                        <div class="countdown__amount">
                            <p class="countdown__period">02</p>
                            <span class="unit">Days</span>
                        </div>
                        <div class="countdown__amount">
                            <p class="countdown__period">22</p>
                            <span class="unit">Hours</span>
                        </div>
                        <div class="countdown__amount">
                            <p class="countdown__period">57</p>
                            <span class="unit">Mins</span>
                        </div>
                        <div class="countdown__amount">
                            <p class="countdown__period">24</p>
                            <span class="unit">Sec</span>
                        </div>
                    </div>
                </div>

                <div class="deals__btn">
                    <a href="shop.html" class="btn btn--md">Shop Now</a>
                </div>
            </div>

            <div class="deals__item">
                <div class="deals__group">
                    <h3 class="deals__brand">Deal of the day</h3>
                    <span class="deals__category">Limited quantities.</span>
                </div>

                <h4 class="deals__title">Summer Collection New Modern Design</h4>
                <div class="deals__price flex">
                    <span class="new__price">€230</span>
                    <span class="old__price">€250</span>
                </div>

                <div class="deals__group">
                    <p class="deals__countdown-text">Hurry Up! Offer End In:</p>

                    <div class="countdown">
                        <div class="countdown__amount">
                            <p class="countdown__period">02</p>
                            <span class="unit">Days</span>
                        </div>
                        <div class="countdown__amount">
                            <p class="countdown__period">22</p>
                            <span class="unit">Hours</span>
                        </div>
                        <div class="countdown__amount">
                            <p class="countdown__period">57</p>
                            <span class="unit">Mins</span>
                        </div>
                        <div class="countdown__amount">
                            <p class="countdown__period">24</p>
                            <span class="unit">Sec</span>
                        </div>
                    </div>
                </div>

                <div class="deals__btn">
                    <a href="shop.html" class="btn btn--md">Shop Now</a>
                </div>
            </div>
         </div>
      </section>

    <!--=============== FOOTER ===============-->
    <footer class="footer container">
        <div class="footer__container grid">
            <div class="footer__content">
                <a href="index.html" class="footer__logo">
                    <img src="images/logo.png" alt="" class="footer__logo-img">
                </a>

                <h4 class="footer__subtitle">Contact</h4>
                <p class="footer__description">
                    <span>Address:</span> 562 Konrad Duden Weg, Frankfurt, Germany
                </p>

                <p class="footer__description">
                    <span>Phone:</span> 01588745454
                </p>

                <p class="footer__description">
                    <span>Working Hours:</span> 10:00 - 18:00, Mon-Sat
                </p>

                <div class="footer__social">
                    <div class="footer__subtitle">Follow Me</div>
                    <div class="footer_-social-links flex">
                        <a href="#">
                            <img src="images/icon-facebook.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="#">
                            <img src="images/icon-instagram.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="#">
                            <img src="images/icon-twitter.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="#">
                            <img src="images/icon-pinterest.svg" alt="" class="footer__social-icon">
                        </a>

                        <a href="#">
                            <img src="images/icon-youtube.svg" alt="" class="footer__social-icon">
                        </a>
                    </div>

                </div>

            </div>

            <div class="footer__content">
                <h3 class="footer__title">Address</h3>
                <ul class="footer__links">
                    <li><a href="#" class="footer__link">About Us</a></li>
                    <li><a href="#" class="footer__link">Delivery Information</a></li>
                    <li><a href="#" class="footer__link">Privacy Policy</a></li>
                    <li><a href="#" class="footer__link">Terms & Conditions</a></li>
                    <li><a href="#" class="footer__link">Contact Us</a></li>
                    <li><a href="#" class="footer__link">Support Center</a></li>
                </ul>
            </div>

            <div class="footer__content">
                <h3 class="footer__title">My Account</h3>
                <ul class="footer__links">
                    <li><a href="#" class="footer__link">Sign In</a></li>
                    <li><a href="#" class="footer__link">View cart</a></li>
                    <li><a href="#" class="footer__link">Register</a></li>
                    <li><a href="#" class="footer__link">Track My Order</a></li>
                    <li><a href="#" class="footer__link">Help</a></li>
                    <li><a href="#" class="footer__link">Order</a></li>
                </ul>
            </div>

            <div class="footer__content">
                <h3 class="footer__title">Secured Payment Gateways</h3>
                <img src="images/payment-method.png" alt="" class="payment__img">
            </div>
        </div>

        <div class="footer__bottom">
            <p class="copyright">&copy; 2025 Coziture. All Rights Reserved.</p>
        </div>
    </footer>

    <!--=============== SWIPER JS ===============-->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
     
    <!--=============== MAIN JS ===============-->
    <script src="js/main.js"></script>

    <script>
      // Fetching product data from API and inserting it dynamically
      fetch('http://WebshopBackend-env.eba-xvipbktv.us-east-1.elasticbeanstalk.com/api/products')  // Ensure this URL is correct
        .then(response => response.json()) // Convert response to JSON
        .then(data => {
            const productContainer = document.getElementById('product-list');
            
            // Loop through the data and insert each product dynamically
            data.forEach(product => {
                const productItem = document.createElement('div');
                productItem.classList.add('product__item');
                productItem.innerHTML = `
                    <div class="product__banner">
                        <a href="details.html?productId=${product.productId}" class="product__images">
                            <img src="images/${product.imageUrl}1.jpg" alt="${product.productName}" class="product__img default">
                        </a>
                    </div>
                    <div class="product__content">
                        <a href="details.html"><h3 class="product__title">${product.productName}</h3></a>
                        <div class="product__rating">
                            ${generateStars(product.basePrice)}
                        </div>
                        <div class="product__price flex">
                            <span class="new__price">€${product.basePrice}</span>
                            <span class="old__price">€${(product.basePrice * 1.2).toFixed(2)}</span>
                        </div>
                    </div>
                `;
                productContainer.appendChild(productItem);
            });
        })
        .catch(error => {
            console.error("Error fetching products:", error); // Handle errors
        });

      // Function to generate star rating (based on price)
      function generateStars(price) {
          const stars = Math.floor(price / 100);  // Example: 1 star per 100 units of price
          let starHtml = '';
          for (let i = 0; i < 5; i++) {
              starHtml += i < stars ? '<i class="fi fi-rs-star"></i>' : '<i class="fi fi-rs-star-empty"></i>';
          }
          return starHtml;
      }


      fetch('http://WebshopBackend-env.eba-xvipbktv.us-east-1.elasticbeanstalk.com/api/categories')
        .then(response => response.json()) // Convert the response to JSON
        .then(data => {
            // Get the container where categories will be displayed
            const categoryListContainer = document.getElementById("category-list");

            // Loop through the categories data
            data.forEach(category => {
            const categoryItem = document.createElement("a");
            categoryItem.classList.add("category__item", "swiper-slide");
            categoryItem.href = "productbyCategory.html?categoryId=" + category.categoryId;

            categoryItem.innerHTML = `
                <img src="images/${category.categoryName.toLowerCase().replace(/ /g, '-').replace(/s$/, '')}11.jpg" alt="${category.categoryName}" class="category__img">
                <h3 class="category__title">${category.categoryName}</h3>
            `;

            // Append the category item to the categories container
            categoryListContainer.appendChild(categoryItem);
            });
        })
        .catch(error => {
            console.error("Error fetching categories:", error); // Handle errors
        });
    </script>
  </body>
</html>
